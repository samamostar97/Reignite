<div class="tab-panel">
  <h3 class="tab-title">Promjena lozinke</h3>
  <p class="tab-description">Unesite trenutnu lozinku i novu lozinku.</p>

  @if (errorMessage()) {
    <div class="error-alert">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z" />
      </svg>
      <span>{{ errorMessage() }}</span>
    </div>
  }

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="password-form">
    <div class="form-group">
      <label class="form-label">Trenutna lozinka</label>
      <input type="password" formControlName="currentPassword" class="form-input"
             [class.invalid]="hasError('currentPassword', 'required')" />
      @if (hasError('currentPassword', 'required')) {
        <span class="form-error">Trenutna lozinka je obavezna.</span>
      }
    </div>

    <div class="form-group">
      <label class="form-label">Nova lozinka</label>
      <input type="password" formControlName="newPassword" class="form-input"
             [class.invalid]="hasError('newPassword', 'required') || hasError('newPassword', 'minlength')" />
      @if (hasError('newPassword', 'required')) {
        <span class="form-error">Nova lozinka je obavezna.</span>
      }
      @if (hasError('newPassword', 'minlength')) {
        <span class="form-error">Lozinka mora imati najmanje 6 znakova.</span>
      }
    </div>

    <div class="form-group">
      <label class="form-label">Potvrdite novu lozinku</label>
      <input type="password" formControlName="confirmPassword" class="form-input"
             [class.invalid]="hasError('confirmPassword', 'required')" />
      @if (hasError('confirmPassword', 'required')) {
        <span class="form-error">Potvrda lozinke je obavezna.</span>
      }
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary" [disabled]="isSaving()">
        @if (isSaving()) {
          <div class="spinner-small"></div>
          Spremanje...
        } @else {
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
          </svg>
          Promijeni lozinku
        }
      </button>
    </div>
  </form>
</div>
