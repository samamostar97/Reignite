<div class="tab-panel">
  <div class="tab-header">
    <div>
      <h3 class="tab-title">Hobiji</h3>
      <p class="tab-description">Upravljajte svojim hobijima i interesima.</p>
    </div>
    @if (!showAddForm() && availableHobbies.length > 0) {
      <button class="btn-primary btn-sm" (click)="openAddForm()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
        Dodaj hobi
      </button>
    }
  </div>

  @if (isLoading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Učitavanje hobija...</p>
    </div>
  } @else {
    <!-- Add form -->
    @if (showAddForm()) {
      <div class="add-form">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Hobi</label>
            <select class="form-select" [ngModel]="selectedHobbyId()" (ngModelChange)="selectedHobbyId.set($event)">
              <option [ngValue]="null" disabled>Odaberite hobi...</option>
              @for (hobby of availableHobbies; track hobby.id) {
                <option [ngValue]="hobby.id">{{ hobby.name }}</option>
              }
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Nivo vještine</label>
            <select class="form-select" [ngModel]="selectedSkillLevel()" (ngModelChange)="selectedSkillLevel.set($event)">
              <option [ngValue]="SkillLevel.Beginner">Početnik</option>
              <option [ngValue]="SkillLevel.Intermediate">Srednji</option>
              <option [ngValue]="SkillLevel.Advanced">Napredni</option>
            </select>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn-secondary" (click)="cancelAdd()">Otkaži</button>
          <button class="btn-primary" (click)="addHobby()" [disabled]="!selectedHobbyId() || isSaving()">
            @if (isSaving()) {
              <div class="spinner-small"></div>
              Dodavanje...
            } @else {
              Dodaj
            }
          </button>
        </div>
      </div>
    }

    <!-- Hobbies list -->
    @if (userHobbies().length === 0 && !showAddForm()) {
      <div class="empty-state">
        <div class="empty-icon">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42" />
          </svg>
        </div>
        <h4>Nemate dodanih hobija</h4>
        <p>Dodajte hobije da biste personalizovali svoje iskustvo.</p>
      </div>
    } @else if (userHobbies().length > 0) {
      <div class="hobbies-grid">
        @for (hobby of userHobbies(); track hobby.id) {
          <div class="hobby-card">
            <div class="hobby-info">
              <span class="hobby-name">{{ hobby.hobbyName }}</span>
              <span class="skill-badge" [ngClass]="getSkillClass(hobby.skillLevel)">
                {{ getSkillLabel(hobby.skillLevel) }}
              </span>
            </div>
            @if (hobby.bio) {
              <p class="hobby-bio">{{ hobby.bio }}</p>
            }
            <button class="btn-remove" (click)="removeHobby(hobby.hobbyId)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        }
      </div>
    }
  }
</div>
